<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABEL - Artificial Buddy for Effective Learning</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&family=Inter:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <!-- Aurora Background -->
    <div class="aurora-bg">
        <div class="aurora-orb"></div>
        <div class="aurora-orb"></div>
        <div class="aurora-orb"></div>
        <div class="aurora-orb"></div>
        <div class="aurora-orb"></div>
    </div>

    <!-- Landing Page -->
    <div class="landing-page" id="landing-page">
        <nav class="top-nav">
            <div class="logo">ABEL</div>
            
            <!-- Auth Buttons (Default) -->
            <div class="nav-buttons" id="nav-auth-buttons">
                <button class="btn btn-ghost" onclick="openAuthModal('login')">Login</button>
                <button class="btn btn-primary" onclick="openAuthModal('signup')">Sign Up</button>
            </div>

            <!-- User Profile Menu (Logged In) -->
            <div class="user-profile-menu hidden" id="landing-user-menu" style="position: relative;">
                <div class="user-avatar-trigger" onclick="toggleUserDropdown()" style="width: 40px; height: 40px; background: var(--gradient-user); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: 600; font-size: 1.2rem;">
                    <span id="landing-user-avatar-text">U</span>
                </div>
                
                <!-- Dropdown -->
                <div class="user-dropdown hidden" id="landing-user-dropdown" style="position: absolute; top: 50px; right: 0; width: 200px; background: rgba(18, 18, 26, 0.95); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: 12px; padding: 1rem; z-index: 100;">
                    <div style="font-weight: 500; margin-bottom: 0.25rem;" id="landing-user-name">User</div>
                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 1rem; word-break: break-all;" id="landing-user-email">user@example.com</div>
                    <div style="height: 1px; background: var(--glass-border); margin-bottom: 0.5rem;"></div>
                    <button onclick="openLogoutModal()" style="width: 100%; text-align: left; padding: 0.5rem; background: transparent; border: none; color: #ef4444; cursor: pointer; border-radius: 6px; font-size: 0.9rem;">
                        Sign Out
                    </button>
                </div>
            </div>
        </nav>

        <main class="hero">
            <div class="hero-content" id="hero-content">
                <div class="hero-badge">
                    <span class="dot"></span>
                    Powered by Graph RAG Technology
                </div>
                <h1 class="hero-title">
                    Meet <span>ABEL</span>
                </h1>
                <p class="hero-subtitle">
                    Your Artificial Buddy for Effective Learning. Ask anything and get intelligent, context-aware answers.
                </p>
            </div>

            <div class="hero-input-wrapper" id="hero-input-wrapper">
                <div class="hero-input-container">
                    <input 
                        type="text" 
                        class="hero-input" 
                        id="hero-input"
                        placeholder="Ask me anything..." 
                        autocomplete="off"
                    >
                    <button class="hero-input-btn" id="hero-submit-btn">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"/>
                        </svg>
                    </button>
                </div>
                <div class="hero-hints">
                    <span class="hero-hint" onclick="setHeroInput('What is machine learning?')">What is machine learning?</span>
                    <span class="hero-hint" onclick="setHeroInput('Explain neural networks')">Explain neural networks</span>
                    <span class="hero-hint" onclick="setHeroInput('How does RAG work?')">How does RAG work?</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Auth Modal -->
    <div class="modal-overlay" id="auth-modal">
        <div class="auth-modal">
            <button class="modal-close" onclick="closeAuthModal()">
                <svg width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
                </svg>
            </button>
            
            <h2 id="auth-title">Welcome back</h2>
            <p class="subtitle" id="auth-subtitle">Sign in to continue your learning journey</p>

            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login" onclick="switchAuthTab('login')">Login</button>
                <button class="auth-tab" data-tab="signup" onclick="switchAuthTab('signup')">Sign Up</button>
            </div>

            <form id="auth-form" onsubmit="handleAuth(event)">
                <div class="form-group hidden" id="username-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn-submit" id="auth-submit-btn">Sign In</button>
            </form>

            <div class="auth-divider">or continue with</div>

            <button class="btn-google" onclick="googleAuth()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                Continue with Google
            </button>
        </div>
    </div>

    <!-- Generic Confirmation Modal -->
    <div class="modal-overlay" id="confirm-modal">
        <div class="auth-modal logout-confirm">
            <h2 id="confirm-title">Confirmation</h2>
            <p class="subtitle" id="confirm-message">Are you sure?</p>
            <div class="logout-actions">
                <button class="btn btn-ghost" id="confirm-cancel-btn">Cancel</button>
                <button class="btn btn-primary" id="confirm-yes-btn">Yes</button>
            </div>
        </div>
    </div>

    <!-- Chat Dashboard -->
    <div class="chat-dashboard" id="chat-dashboard">
        <!-- Main Chat Area (Sidebar Removed) -->
        <main class="chat-main" style="width: 100%; margin-left: 0;">
            <header class="chat-header">
                <!-- Left: Title -->
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div class="logo" style="font-size: 1rem; cursor: pointer;" onclick="transitionToLanding()" title="Back to Home">ABEL</div>
                    <span class="chat-title" id="chat-title-header"></span>
                </div>

                <!-- Right: Actions -->
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <button class="btn-new-chat-header" onclick="newChat()" title="New Conversation" style="background:transparent; border:none; color:var(--text-secondary); cursor:pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                    </button>
                    
                    <button class="btn-logout-header" onclick="openLogoutModal()" title="Logout" style="background:transparent; border:none; color:var(--text-secondary); cursor:pointer; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; border-radius: 8px;">
                        <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"/>
                        </svg>
                    </button>
                </div>
            </header>

            <div class="chat-messages" id="chat-messages">
                <!-- Welcome screen shown when no messages -->
                <div class="chat-welcome" id="chat-welcome">
                    <h2>How can I help you today?</h2>
                    <p>Ask me anything about your knowledge base</p>
                    <div class="suggestion-chips">
                        <button class="suggestion-chip" onclick="sendSuggestion('Explain graph databases')">Explain graph databases</button>
                        <button class="suggestion-chip" onclick="sendSuggestion('What is RAG?')">What is RAG?</button>
                        <button class="suggestion-chip" onclick="sendSuggestion('How do neural networks learn?')">How do neural networks learn?</button>
                    </div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-input-container">
                    <textarea 
                        class="chat-input" 
                        id="chat-input"
                        placeholder="Type your message..." 
                        rows="1"
                    ></textarea>
                    <button class="btn-send" id="send-btn" onclick="sendMessage()">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L6 12Zm0 0h7.5"/>
                        </svg>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
